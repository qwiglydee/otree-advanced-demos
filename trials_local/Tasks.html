{{ block styles }}
<link href="{{ static 'fullscreen.css' }}" rel="stylesheet">
<link href="{{ static 'progress2.css' }}" rel="stylesheet">
<link href="{{ static 'enhancements.css' }}" rel="stylesheet">
{{ endblock }}

{{ block content }}

<header>
    <my-progress class="w-100"
        max="vars.progress.total" ticks="1"
        value="vars.progress.completed"
        value2="vars.progress.iteration">
    </my-progress>
    <div class="alert alert-info m-2">Total score: <b ot-text="vars.progress.score"></b></div>
</header>

<main ot-class="vars.transition">
    <div class="fs-3" ot-text="vars.trial.expression"></div>

    <div class="input-group w-10">
        <span class="input-group-text">=</span>
        <input type="number" class="form-control" ot-input name="response" ot-kbd="Enter" autofocus>
    </div>
</main>

<footer ot-class="vars.transition">
    <p>Enter your answer and press <kbd>Enter</kbd>.</p>
</footer>

<input type="hidden" name="responses_json" ot-value="vars.responses_json">

{{ endblock }}

{{ block scripts }}

<script src="{{ static 'otree-front-1.3.b1.js' }}"></script>
<script src="{{ static 'progress2.js' }}"></script>
<script src="{{ static 'trials-local.js' }}"></script>

<script>
    "use strict";

    /* constants used by trials-local.js */
    const TRIALS = js_vars.trials;  // pre-generated trials in form { iteration: trial_data }
    const TRIAL_DELAY = js_vars.trial_delay;  // delay in ms between iterations
    const FADEOUT_TIME = 100; // fadeout css animation

    ot.onInput('response', function (value) {
        if (value == "") return;
        ot.disableInputs();
        ot.completeTrial({
            response: parseInt(value),
        });
    });
</script>

{{ endblock }}