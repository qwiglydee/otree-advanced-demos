{{ block title }}
    Page
{{ endblock }}

{{ block styles }}
<link rel="stylesheet" href="{{ static 'fullscreen.css' }}">
<link href="{{ static 'framed.css' }}" rel="stylesheet">
<link rel="stylesheet" href="{{ static 'xfade.css' }}">
<link rel="stylesheet" href="{{ static 'spinner-pulse.css' }}">
<style>
    .otree-body {
        border: 1px solid #dee2e6;
        border-radius: .25rem;
    }

    main {
        /* --x-fade-out-time: 200ms;
        --x-fade-in-time: 100ms; */
        background-color: var(--bs-light);
    }

    .h3 {
        /* need fixed height to avoid page re-aligning */
        height: 3rem;
        display: flex;
        align-items: center;
    }
</style>
{{ endblock }}


{{ block content }}

<header>
    <h3>The header</h3>
    <p>Some content</p>
</header>

<main ot-class="vars.fading">
    <h3>The main</h3>
    <p>Some content <span ot-text="vars.counter"></span></p>

    <div class="d-flex flex-row gap-1">
        <div class="bg-primary text-light p-3">1</div>
        <div class="bg-primary text-light p-3">2</div>
        <div class="bg-primary text-light p-3">3</div>
    </div>
</main>

<footer>
    <h3>The footer</h3>
    <p>Some content</p>
    <div class="h3">
        <button ot-display="nextbtn" type="button" class="btn btn-primary" ot-input name="next">Next</button>
        <div ot-display="spinner" class="spinner-ellipsis"><i></i><i></i><i></i></div>
    </div>
</footer>

{{ endblock }}


{{ block scripts }}
<script src="{{ static 'otree-front.js' }}"></script>

<script>
    ot.onStartPage(function() {
        vars.counter = 0;
        console.debug("started");
        ot.emitEvent('start');
    });

    ot.onLive("pong", function(data) {
        console.debug("pong:", data)
    });

    ot.onLive("feedback", function(data) {
        console.debug("feedback:", data)
    });

    ot.onLive("broadcast", function(data) {
        console.debug("broadcast:", data)
    });

    ot.onEvent('start', function() {
        vars.counter += 1;
        vars.fading = "fadein";
        ot.showDisplays('spinner');
        ot.hideDisplays('nextbtn');
        ot.delayEvent(3000, 'ready');
    });

    ot.onEvent('ready', function() {
        ot.hideDisplays('spinner');
        ot.showDisplays('nextbtn');
    });

    ot.onInput('next', function() {
        vars.fading = "fadeout";
        ot.delayEvent(200, 'start');
    });
</script>


{{ endblock }}